# Домашнее задание к занятию «Репликация и масштабирование. Часть 2» - 

---

# Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;


*Дайте ответ в свободной форме.*

## Решение 1

**Преимущества масштабирования**
1) Активный master-сервер и пассивный slave-сервер
- Отказоустойчивость: Если master выходит из строя, slave может быть переведён в режим master, минимизируя время простоя.
- Распределение нагрузки чтения: Запросы на чтение можно перенаправлять на slave, снижая нагрузку на master.
- Резервное копирование: На slave можно выполнять бэкапы без влияния на производительность master.
- Тестирование и аналитика: Slave можно использовать для тестирования обновлений или выполнения аналитических запросов без нагрузки на основной сервер.
2. Master-сервер и несколько slave-серверов
- Масштабируемость чтения: Запросы на чтение распределяются между несколькими slave-серверами, что позволяет обслуживать больше пользователей.
- Геораспределение: Slave-серверы можно размещать в разных регионах для уменьшения задержки.
- Отказоустойчивость: При выходе из строя одного slave остальные продолжают работать.
- Разделение задач: Разные slave можно использовать для разных целей (бэкапы, отчёты, тестирование).

**Вывод**
- Использование репликации позволяет повысить отказоустойчивость, распределить нагрузку и улучшить производительность системы.


---

# Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

## Решение 2

План горизонтального и вертикального шардинга базы данных

Базы данных:
<!-- TABLE_GENERATE_START -->
|    Users       |     books     |      shops     |
| -------------  | ------------- | -------------- |
| user_id(prim)  | book_id(prim) |  shop_id(prim) |
|  first_name    |     title     |      city      |
|   last_name    |    author     |     address    |
|     email      |     price     |     meneger    |
|     phone      |               |                |
|    book_id     |               |                |
<!-- TABLE_GENERATE_END -->

1. Вертикальный шардинг

Вертикальный шардинг будем производить по двум таблицам users и books так как они наиболее часто используются

#### Схема:
* Server 1 (Master) 
    * users (запись/чтение)
    * shops (запись/чтение)
    * books (запись/чтение)
 
* Server 2 (Slave)
    * books (чтеие)

* Server 2 (Slave)
    * users (чтеие)

![12-07-01](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/7%20-%20Replication%20and%20scaling%20Part%202/img/12-07-01.png?raw=true)




2. Горизонтальный шардинг

Горизонтальный шардинг будем производить по двум таблицам users и books так как они наиболее часто используются (разделять будем по алфааиту 1 - (A-M), 2 - (N-Z))

#### Схема:
* Server 1 (Master) 
    * users (запись/чтение)
    * shops (запись/чтение)
    * books (запись/чтение)
 
* Server 2 (Slave)
    * books (A-M) (чтеие)
    * users (A-M) (чтеие)

* Server 2 (Slave)
    * users (N-Z) (чтеие)
    * books (N-Z) (чтеие)

![12-07-02](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/7%20-%20Replication%20and%20scaling%20Part%202/img/12-07-02.png?raw=true)

### Вывод
- Вертикальный шардинг улучшает производительность за счёт разделения таблиц по функционалу.
- Горизонтальный шардинг позволяет распределить нагрузку внутри одной таблицы.
- Master-Slave репликация обеспечивает отказоустойчивость и балансировку чтения/записи.
- Такой подход обеспечивает высокую доступность, отказоустойчивость и масштабируемость базы данных.