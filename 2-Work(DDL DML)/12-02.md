# Домашнее задание к занятию «Работа с данными (DDL/DML) - Рыхлик ИА»

---

### Задание 1
1.1. Поднимите чистый инстанс MySQL версии 8.0+. Можно использовать локальный сервер или контейнер Docker.

1.2. Создайте учётную запись sys_temp. 

1.3. Выполните запрос на получение списка пользователей в базе данных. (скриншот)

1.4. Дайте все права для пользователя sys_temp. 

1.5. Выполните запрос на получение списка прав для пользователя sys_temp. (скриншот)

1.6. Переподключитесь к базе данных от имени sys_temp.

Для смены типа аутентификации с sha2 используйте запрос: 
```sql
ALTER USER 'sys_test'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';
```
1.6. По ссылке https://downloads.mysql.com/docs/sakila-db.zip скачайте дамп базы данных.

1.7. Восстановите дамп в базу данных.

1.8. При работе в IDE сформируйте ER-диаграмму получившейся базы данных. При работе в командной строке используйте команду для получения всех таблиц базы данных. (скриншот)

*Результатом работы должны быть скриншоты обозначенных заданий, а также простыня со всеми запросами.*

---

### Решение 1

Скачаем и установим необходимые компанениту для linux debian 12 с сайта 

https://dev.mysql.com/downloads/mysql/

![сайт MySQL](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-01.png?raw=true)

скачить и установить следующие зависимости 
```
mysql-client_8.0.44-1debian12_amd64.deb
mysql-common_8.0.44-1debian12_amd64.deb
mysql-community-client_8.0.44-1debian12_amd64.deb
mysql-community-client-core_8.0.44-1debian12_amd64.deb
mysql-community-client-plugins_8.0.44-1debian12_amd64.deb
mysql-community-server_8.0.44-1debian12_amd64.deb
mysql-community-server-core_8.0.44-1debian12_amd64.deb
```
![12-02-02](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-02.png?raw=true)

![12-02-03](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-03.png?raw=true)

Выполняемые команды
```
CREATE USER 'sys_temp'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';
SELECT User,Host FROM mysql.user;
GRANT ALL PRIVILEGES ON *.* TO 'sys_temp'@'localhost';
FLUSH PRIVILEGES;
SHOW GRANTS FOR 'sys_temp'@'localhost';

```

![12-02-04](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-04.png?raw=true)

![12-02-05](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-05.png?raw=true)

![12-02-06](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-06.png?raw=true)

![12-02-07](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-07.png?raw=true)

![12-02-08](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-08.png?raw=true)

![12-02-09](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-09.png?raw=true)

Восстанавливаем дамп базы данных Sakita
воспльзуемся инструкцией
https://dev.mysql.com/doc/sakila/en/sakila-installation.html

```
wget https://downloads.mysql.com/docs/sakila-db.zip
unzip sakila-db.zip
mysql> SOURCE /home/debian/sakila-db/sakila-schema.sql;
mysql> SOURCE /home/debian/sakila-db/sakila-data.sql;
SHOW DATABASES;
USE sakila;
SHOW FULL TABLES;
```
![12-02-10](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-10.png?raw=true)

![12-02-11](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-11.png?raw=true)

![12-02-12](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-12.png?raw=true)

![12-02-13](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-13.png?raw=true)


---
### Задание 2
Составьте таблицу, используя любой текстовый редактор или Excel, в которой должно быть два столбца: в первом должны быть названия таблиц восстановленной базы, во втором названия первичных ключей этих таблиц. Пример: (скриншот/текст)
```
Название таблицы | Название первичного ключа
customer         | customer_id
```

---
### Решение 2

[Таблица первичных ключе](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/sakila.xlsx?raw=true)

![12-02-14](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-14.png?raw=true)

![12-02-15](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-15.png?raw=true)

---

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

### Задание 3*
3.1. Уберите у пользователя sys_temp права на внесение, изменение и удаление данных из базы sakila.

3.2. Выполните запрос на получение списка прав для пользователя sys_temp. (скриншот)

*Результатом работы должны быть скриншоты обозначенных заданий, а также простыня со всеми запросами.*

---

### Решение 3*

Пока не убрал полные привилегии у пользователя не получилось добавлять ограничения на конкретную базу

```
mysql -u root -p
REVOKE ALL PRIVILEGES ON *.* FROM 'sys_temp'@'localhost';
GRANT ALL ON sakila.* TO 'sys_temp'@'localhost';
REVOKE UPDATE ON sakila.* FROM 'sys_temp'@'localhost';
REVOKE INSERT, DELETE ON sakila.* FROM 'sys_temp'@'localhost';

```

![12-02-16](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-16.png?raw=true)

![12-02-17](https://github.com/ilaryhlik17854-stack/HW-relational_databases/blob/main/2-Work(DDL%20DML)/img/12-02-17.png?raw=true)